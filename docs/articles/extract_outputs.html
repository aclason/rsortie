<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to extract rsortie outputs • rsortie</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How to extract rsortie outputs">
<meta property="og:description" content="rsortie">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rsortie</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/add_harvest.html">add_harvest</a>
    </li>
    <li>
      <a href="../articles/add_plant.html">add_plant</a>
    </li>
    <li>
      <a href="../articles/edit_inputs.html">How to edit and prepare rsortie input files</a>
    </li>
    <li>
      <a href="../articles/extract_outputs.html">How to extract rsortie outputs</a>
    </li>
    <li>
      <a href="../articles/use_rsortie.html">How to use the rsortie package</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>How to extract rsortie outputs</h1>
            
      
      
      <div class="hidden name"><code>extract_outputs.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">rsortie</span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
</div>
<div class="section level2">
<h2 id="extracting-output-files">Extracting output files<a class="anchor" aria-label="anchor" href="#extracting-output-files"></a>
</h2>
<p>It is possible to automatically extract all the output files from one or more SORTIE runs.</p>
<p>The program will look in the directory:<br>
C:/Projects/SORTIE/output/</p>
<p>It will then loop over all the tar files in that directory and extract them to the directory:<br>
C:/Projects/SORTIE/output/extracted</p>
<p>This is a very rudimentary function at this point. It will always open all tarfiles in the output directory, and overwrite all files in the extracted directory.</p>
<p><em>Further functionality is forthcoming</em></p>
<p>This function returns a list of all xml files that are in the extracted directory.</p>
</div>
<div class="section level2">
<h2 id="read-tree-output-files">Read tree output files<a class="anchor" aria-label="anchor" href="#read-tree-output-files"></a>
</h2>
<p>The function ParseXML allows users to read one or more years from one or more xml file.</p>
<p>Inputs to the function include a list of one or more xml files, as well as a list of one or more years to extract.</p>
<p>Put the list of xml files into the variable “ListOfExtractedFile”. Note that this variable can also be filled automatically when using the ExtractFiles function described in the previous section.</p>
<p>Put the list of years to extract into the variable “YearsToExtract”</p>
<p>The code will then run over each set of files and years to read the tree list file and to put the resulting information into an R variable:<br>
trees_#<br>
where # is the loop number. Right now there is no correspondence between the loop number and the file-year combination.</p>
<p>The new variable will have all the columns that Sortie printed to the output file, including one called ID. Note that ID simply represents the place in the output file that tree record contained. While this ID may refer to the same tree for some timesteps, mortality or establishment of that tree record or other trees will change the id. Use the x-y location to track trees instead as they will remain constant for the life of the tree.</p>
</div>
<div class="section level2">
<h2 id="read-map-output-files">Read map output files<a class="anchor" aria-label="anchor" href="#read-map-output-files"></a>
</h2>
<p>The function ParseMap allows users to read all the maps in an output xml file.</p>
<p>In the function, manually assign the name of the output file to read.</p>
<p>The code will scan the file to find all the maps that are present, then will loop over each map in the file, extract the information, and assign it to two different R variables.</p>
<p>The grid and information will be stored in an R variable called:<br>
map_#<br>
where # is the location in the output file.</p>
<p>The type of map is stored in a variable called:<br>
output_type_#<br>
where # is again the location in the output file. The type of the map is read from the output file and could be something like “Dispersed Seeds” or “GLI Map 1”.</p>
</div>
<div class="section level2">
<h2 id="read-raster-files">Read raster files<a class="anchor" aria-label="anchor" href="#read-raster-files"></a>
</h2>
<p>There is a stand-alone file “RasterFunctions.r” that will read a raster file and write the information to a text file. This is a simple file whose goal is to allow users to quickly change a raster file into a format that can be pulled into an xml chunk and added to the Sortie file.</p>
<p>Input: raster file name<br>
Output: an text file in xml format. Each cell that has a value greater than 0 will be printed as:<br>
&lt;ha_applyToCell x=”xloc” y=“yloc’/&gt;</p>
<p>Where xloc and yloc are the x-y locations in the raster file.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Alana Clason.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
